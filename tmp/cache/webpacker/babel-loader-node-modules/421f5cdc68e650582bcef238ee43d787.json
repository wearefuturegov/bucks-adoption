{"ast":null,"code":"var _jsxFileName = \"/Users/chrisevans/Desktop/github/bucks-adoption/app/javascript/components/Filter/CategoryFilter.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { Dialog } from \"@reach/dialog\";\nimport CheckboxItem from \"./CheckboxItem\";\nimport Router from \"next/router\";\nimport \"@reach/dialog/styles.css\";\nimport \"./style.scss\";\nimport cross from \"./cross.svg\";\n\nvar InterestsFilter = function InterestsFilter() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      dialogIsOpen = _useState2[0],\n      toggleDialog = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selection = _useState4[0],\n      changeSelection = _useState4[1];\n\n  useEffect(function () {\n    Router.query.category && changeSelection([].concat(Router.query.category));\n  }, dialogIsOpen); // Add and remove checked and unchecked items from array\n\n  var handleChange = function handleChange(e) {\n    var _e$target = e.target,\n        checked = _e$target.checked,\n        value = _e$target.value;\n\n    if (checked) {\n      changeSelection([].concat(_toConsumableArray(selection), [value]));\n    } else {\n      changeSelection(selection.filter(function (el) {\n        return el != value;\n      }));\n    }\n  }; // Create new query from state and push new route\n\n\n  var updateResults = function updateResults(e) {\n    if (e) e.preventDefault();\n    Router.push({\n      pathname: Router.pathname,\n      query: _objectSpread({}, Router.query, {\n        category: selection\n      })\n    });\n    toggleDialog(false);\n  }; // Clear state\n\n\n  var clearFilter = function clearFilter(e) {\n    if (e) e.preventDefault();\n    changeSelection([]);\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"button\", {\n    className: selection.length > 0 ? \"filter-button filter-button--active\" : \"filter-button\",\n    onClick: function onClick() {\n      toggleDialog(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, \"Your interests\"), React.createElement(Dialog, {\n    className: \"filter-dialog\",\n    isOpen: dialogIsOpen,\n    onDismiss: updateResults,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    method: \"get\",\n    action: \"/recommendations\",\n    onSubmit: updateResults,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"fieldset\", {\n    className: \"filter-dialog__body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    className: \"filter-dialog__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"legend\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"Your interests\")), React.createElement(\"div\", {\n    className: \"filter-dialog__options\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(CheckboxItem, {\n    label: \"Staying active\",\n    name: \"category\",\n    value: \"active\",\n    selectionState: selection,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), React.createElement(CheckboxItem, {\n    label: \"Socialising\",\n    name: \"category\",\n    value: \"social\",\n    selectionState: selection,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }), React.createElement(CheckboxItem, {\n    label: \"Support\",\n    name: \"category\",\n    value: \"support\",\n    selectionState: selection,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }), React.createElement(CheckboxItem, {\n    label: \"Visiting new places\",\n    name: \"category\",\n    value: \"cultural\",\n    selectionState: selection,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }), React.createElement(CheckboxItem, {\n    label: \"Learning new things\",\n    name: \"category\",\n    value: \"learning\",\n    selectionState: selection,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }))), React.createElement(\"footer\", {\n    className: \"filter-dialog__footer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"filter-dialog__action\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Apply\"), React.createElement(\"button\", {\n    className: \"filter-dialog__action filter-dialog__action--secondary\",\n    onClick: clearFilter,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"Clear\"))), React.createElement(\"button\", {\n    onClick: function onClick() {\n      toggleDialog(false);\n    },\n    className: \"filter__close\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: cross,\n    alt: \"close filter\",\n    className: \"filter__close-icon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }))));\n};\n\nexport default InterestsFilter;","map":{"version":3,"sources":["/Users/chrisevans/Desktop/github/bucks-adoption/app/javascript/components/Filter/CategoryFilter.jsx"],"names":["React","useState","useEffect","Dialog","CheckboxItem","Router","cross","InterestsFilter","dialogIsOpen","toggleDialog","selection","changeSelection","query","category","concat","handleChange","e","target","checked","value","filter","el","updateResults","preventDefault","push","pathname","clearFilter","length"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\"\nimport { Dialog } from \"@reach/dialog\"\nimport CheckboxItem from \"./CheckboxItem\"\nimport Router from \"next/router\"\nimport \"@reach/dialog/styles.css\"\nimport \"./style.scss\"\nimport cross from \"./cross.svg\"\n\nconst InterestsFilter = () => {\n\n    const [dialogIsOpen, toggleDialog] = useState(false)\n    const [selection, changeSelection] = useState([])\n\n    useEffect(()=>{\n        Router.query.category && changeSelection([].concat(Router.query.category))\n    }, dialogIsOpen)\n\n    // Add and remove checked and unchecked items from array\n    const handleChange = (e) => {\n        let {checked, value} = e.target\n        if(checked){\n            changeSelection([...selection, value]  )\n        } else {\n            changeSelection(selection.filter(el=>{\n                return el != value\n            }))\n        }\n    }\n\n    // Create new query from state and push new route\n    const updateResults = (e) => {\n        if(e) e.preventDefault()\n        Router.push({\n            pathname: Router.pathname,\n            query: {\n                ...Router.query,\n                category: selection\n            }\n        })\n        toggleDialog(false)\n    }\n\n    // Clear state\n    const clearFilter = (e) => {\n        if(e) e.preventDefault()\n        changeSelection([])\n    }\n\n    return (\n        <>\n            <button \n                className={(selection.length > 0)? \"filter-button filter-button--active\" : \"filter-button\"}\n                onClick={() => {toggleDialog(true)}}\n            >\n                Your interests\n            </button>\n            <Dialog\n                className=\"filter-dialog\"\n                isOpen={dialogIsOpen}\n                onDismiss={updateResults}\n            >\n                <form method=\"get\" action=\"/recommendations\" onSubmit={updateResults}>\n                    <fieldset className=\"filter-dialog__body\">\n                        <h2 className=\"filter-dialog__title\"><legend>Your interests</legend></h2>\n                        <div className=\"filter-dialog__options\">\n                            <CheckboxItem \n                                label=\"Staying active\"\n                                name=\"category\"\n                                value=\"active\"\n                                selectionState={selection}\n                                onChange={handleChange}\n                            />\n                            <CheckboxItem \n                                label=\"Socialising\"\n                                name=\"category\"\n                                value=\"social\"\n                                selectionState={selection}\n                                onChange={handleChange}\n                            />\n                            <CheckboxItem \n                                label=\"Support\"\n                                name=\"category\"\n                                value=\"support\"\n                                selectionState={selection}\n                                onChange={handleChange}\n                            />\n                            <CheckboxItem \n                                label=\"Visiting new places\"\n                                name=\"category\"\n                                value=\"cultural\"\n                                selectionState={selection}\n                                onChange={handleChange}\n                            />\n                            <CheckboxItem \n                                label=\"Learning new things\"\n                                name=\"category\"\n                                value=\"learning\"\n                                selectionState={selection}\n                                onChange={handleChange}\n                            />\n                        </div>\n                    </fieldset>\n                    <footer className=\"filter-dialog__footer\">\n                        <button className=\"filter-dialog__action\" \n                            type=\"submit\" \n                        >\n                            Apply\n                        </button>\n                        <button className=\"filter-dialog__action filter-dialog__action--secondary\" onClick={clearFilter}>Clear</button>\n                    </footer>\n                </form>\n                <button onClick={()=>{\n                    toggleDialog(false)\n                }} className=\"filter__close\"><img src={cross} alt=\"close filter\" className=\"filter__close-icon\"/></button>\n            </Dialog>\n            \n        </>\n    )\n}\n\nexport default InterestsFilter"]},"metadata":{},"sourceType":"module"}